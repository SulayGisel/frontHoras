<div class="recuperar-container">
  <div class="logo-container">
    <img src="assets/capgemini-logo.png" alt="Capgemini" class="logo">
  </div>
  
  <div class="recuperar-card">
    <h1 class="sistema-title">Sistema de Gestión de Horas Extras</h1>
    <p class="recuperar-title">Recuperar Contraseña</p>
    <p class="subtitle">Por favor ingresa los datos para recuperar tu contraseña</p>
    
    <form [formGroup]="recuperarForm" (ngSubmit)="onSubmit()">
      <!-- Cedula -->
      <div class="form-group">
        <label for="cedula">Cédula</label>
        <input 
          id="cedula"
          type="text"
          formControlName="cedula"
          placeholder="123456790"
          [class.is-invalid]="cedulaInvalid"
        >
      </div>
      
      <!-- Pregunta de Seguridad (label dinámico) -->
      <div class="form-group security-question-container" *ngIf="securityQuestion">
        <label class="security-question-label" [class.loading]="loadingQuestion">
          {{ securityQuestion }}
        </label>
      </div>

      <!-- Respuesta de Seguridad -->
      <div class="form-group">
        <label for="securityAnswer">Respuesta de Seguridad</label>
        <input 
          id="securityAnswer"
          type="text"
          formControlName="securityAnswer"
          placeholder="Ingrese su respuesta"
          [class.is-invalid]="securityAnswerInvalid"
        >
      </div>

      <!-- Nueva Contraseña -->
      <div class="form-group">
        <label for="newPassword">Nueva Contraseña</label>
        <div class="password-container">
          <input 
            id="newPassword"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="newPassword"
            placeholder="******************"
            [class.is-invalid]="newPasswordInvalid"
          >
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
            <i class="far" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
          </button>
        </div>
      </div>

      <!-- Confirmar Nueva Contraseña -->
      <div class="form-group">
        <label for="confirmPassword">Confirmar contraseña</label>
        <div class="password-container">
          <input 
            id="confirmPassword"
            [type]="showConfirmPassword ? 'text' : 'password'"
            formControlName="confirmPassword"
            placeholder="******************"
            [class.is-invalid]="confirmPasswordInvalid"
          >
          <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
            <i class="far" [class.fa-eye]="!showConfirmPassword" [class.fa-eye-slash]="showConfirmPassword"></i>
          </button>
        </div>
      </div>

      <!-- Botón Submit -->
      <button type="submit" class="submit-button" [disabled]="loading">
        {{loading ? 'Procesando...' : 'Cambiar Contraseña'}}
      </button>

      <!-- Link a inicio de sesión -->
      <div class="login-link">
        ¿Olvidaste tu respuesta de seguridad? <a href="javascript:void(0)" (click)="forgotSecurityAnswer()">Recuperar cuenta</a>
      </div>
      <div class="login-link">
        Recordaste tu contraseña? <a href="/login">Iniciar sesión</a>
      </div>
    </form>
  </div>
</div>